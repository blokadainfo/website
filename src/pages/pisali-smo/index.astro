---
import Layout from '@layouts/Layout.astro';
import Navbar from '@components/custom/navbar/navbar.svelte';

import { type PostMDX } from './types.js';
import { dateToSRB } from '@functions/datetosrb';
import { genderedAuthor } from '@functions/genderedauthor';
const posts = Object.values(import.meta.glob('./*.mdx', { eager: true })) as PostMDX[];
---

<Layout>
  <Navbar homepage={false} client:load />
  <div class="mx-auto flex w-full max-w-screen-sm flex-col p-2 sm:mt-28">
    <h1 class="my-4 text-center text-2xl font-bold sm:my-8 sm:text-3xl">
      Svi tekstovi redakcije Blokada INFO
    </h1>
    <ul class="my-3 space-y-3 text-justify text-lg sm:mx-4 sm:my-5 sm:space-y-5">
      {
        posts.reverse().map((post) => (
          <li>
            <a href={post.url}>
              <div class="grid w-full">
                <img
                  src={post.frontmatter.image}
                  alt={post.frontmatter.title}
                  class="col-start-1 row-start-1 max-h-80 w-full object-cover"
                />
                <div class="col-start-1 row-start-1 h-full bg-gradient-to-t from-black to-transparent" />
                <div class="col-start-1 row-start-1 self-end p-3 text-left">
                  <h1 class="text-2xl font-bold text-balance text-white sm:text-4xl">
                    {post.frontmatter.title}
                  </h1>
                  <span class="sm:text-md text-xs font-light text-gray-200">
                    {genderedAuthor(post.frontmatter.gender)} {post.frontmatter.author} | Napisano{' '}
                    {dateToSRB(post.frontmatter.date)}
                  </span>
                </div>
              </div>
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</Layout>
